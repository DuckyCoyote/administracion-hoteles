extends ./layout/index.pug
block compartircontenido
    .habitaciones
        h1 #{pagina}
        div.lista-gerentes
            button.btn.btn-primary.m-3.fw-bold(data-bs-toggle="modal" data-bs-target="#agregar-habitacion") Agregar Tipo Habitacion 
                i.fa-solid.fa-plus                
            table.table.table-borderless.table-responsive.table-main
                thead
                    tr.table-head-style
                        th(scope="col") Nombre
                        th(scope="col") Precio 
                tbody
                    each Catalogo in catalogo
                        tr.table-body-style
                            td #{Catalogo.nombre_hbt}
                            td #{Catalogo.precio}
                            td.tabla-botones 
                                if (rol === 'adm')                       
                                    button.btn.btn-success.mr-2(data-bs-toggle="modal" data-bs-target=`#mod${Catalogo.nombre_hbt + Catalogo.precio}`)
                                        i.fa-regular.fa-pen-to-square
                                    button.btn.btn-danger.ml-2(data-bs-toggle="modal" data-bs-target=`#mod${Catalogo.nombre_hbt + Catalogo.precio + Catalogo.nombre_hbt}`)
                                        i.fa-solid.fa-trash
                                else
                                    button.btn.btn-success.mr-2(data-bs-toggle="modal" data-bs-target=`#mod${Catalogo.nombre_hbt + Catalogo.precio}`)
                                    i.fa-regular.fa-pen-to-square

        <!--Agregar habitacion Modal-->
            div.modal.fade(id="agregar-habitacion" tabindex="-1" aria-labelledby="agregar-habitacion" aria-hidden="true")
                div.modal-dialog
                    div.modal-content
                        div.modal-header
                            h5.modal-title(id="agregarHabitacionesLabel") Agregar Habitacion
                            button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
                        div.modal-body
                            if(errores)
                                each error in errores
                                    .alert.col.alert-danger.text-center=error.mensaje
                            form(action="/agregarHabitaciones" method="POST")
                                .mb-3
                                    label.form-label(for='nombre') Nombre
                                    input#nombre.form-control(type='text', placeholder="Nombre", name="nombre",
                                    value=nombre)
                                .mb-3
                                    label.form-label(for='piso') Precio
                                    input#piso.form-control(type='number', placeholder="Precio", name="precio",
                                    value=precio)
                                .mb-3
                                    label.form-label(for='id_htl') ID Hotel
                                    select.form-control(id="id_htl" aria-label="Id Hotel", name="id_htl")  
                                        option(selected) Seleccionar un Hotel
                                        //- each idHtl in idHtlSel
                                            //- option(value=idHtl.dataValues.id_htl) #{idHtl.dataValues.id_htl}
                                            
                                button.btn.btn-primary.btn-block(type="submit")  Agregar
                        div.modal-footer
                            button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Cerrar
                            

                <!--Modificar Habitacion Modal-->

            each Catalogo in catalogo
                div.modal.fade(id=`mod${Catalogo.nombre_hbt + Catalogo.precio}` tabindex="-1" aria-labelledby=`mod${Catalogo.nombre_hbt + Catalogo.precio}` aria-hidden="true")
                    div.modal-dialog
                        div.modal-content
                            div.modal-header
                                h5.modal-title(id="modificarHabitacionesLabel") Modificar Habitacion
                                button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
                            div.modal-body
                                if(errores)
                                    each error in errores
                                        .alert.col.alert-danger.text-center=error.mensaje
                                form(action="/editarHabitaciones" method="POST")
                                    .mb-3
                                        label.form-label(for='nombre') Nombre
                                        input#nombre.form-control(type='text', placeholder="Nombre", name="nombre",
                                        value=Catalogo.nombre)
                                    .mb-3
                                        label.form-label(for='id_htl') ID Hotel
                                        input#id_htl.form-control(type='number', placeholder="Id Hotel", name="id_htl",
                                        value=Catalogo.id_htl readonly)                                    
                                    .mb-3
                                        label.form-label(for='id_hbt') ID Habitacion
                                        select.form-control(id="id_hbt" aria-label="Id Habitacion", name="id_hbt")  
                                            option(selected) #{Catalogo.id_hbt}
                                            //- each idHtl in idHtlSel
                                            //-     option(value=idHtl.dataValues.id_htl) #{idHtl.dataValues.id_htl}
                                    .mb-3
                                        label.form-label(for='precio') Precio
                                        input#precio.form-control(type='number', placeholder="Precio", name="precio",
                                        value=Catalogo.precio)
                                    button.btn.btn-primary.btn-block(type="submit") Editar
                            div.modal-footer
                                button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Cerrar
                                

        <!--Eliminar Habitacion Modal-->
            each Catalogo in catalogo
                div.modal.fade(id=`mod${Catalogo.nombre_hbt + Catalogo.precio + Catalogo.nombre_hbt}` tabindex="-1" aria-labelledby= `mod${Catalogo.nombre_hbt + Catalogo.precio + Catalogo.nombre_hbt}` aria-hidden="true")
                    div.modal-dialog.modal-lg
                        div.modal-content
                            div.modal-header
                                h5.modal-title(id="eliminarHotelLabel") Eliminar Habitacion
                                button.btn-close(id="disabledTextInput" type="button" data-bs-dismiss="modal" aria-label="Close")
                            div.modal-body
                                form(action="/eliminarHabitaciones" method="POST")
                                    h2.modal-title Â¿Seguro desea eliminar la habitacion con Id?
                                    input.form-control(type='text', placeholder="id_hbt", name="id_hbt",
                                        value=`${Catalogo.id_hbt}` readonly)
                                    table.table.table-borderless
                                        thead
                                            tr.table-head-style
                                                th(scope="col") Nombre
                                                th(scope="col") ID Hotel
                                                th(scope="col") ID Habitacion
                                                th(scope="col") Precio     
                                        tbody
                                            tr.table-body-style
                                                td #{Catalogo.nombre}
                                                td #{Catalogo.id_hbt}
                                                td #{Catalogo.id_htl}
                                                td #{Catalogo.precio}
                                    button.btn.btn-danger(type="submit") Eliminar
                            div.modal-footer
                                button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Cerrar
                                